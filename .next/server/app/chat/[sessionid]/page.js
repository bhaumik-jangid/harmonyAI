(()=>{var e={};e.id=235,e.ids=[235],e.modules={1708:e=>{"use strict";e.exports=require("node:process")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3971:(e,t,r)=>{"use strict";r.d(t,{A:()=>k});var s=r(60687),a=r(43210),n=r(85814),o=r.n(n),i=r(33172),l=r(11860),d=r(49384),c=r(82348);function u(...e){return(0,c.QP)((0,d.$)(e))}function h({...e}){return(0,s.jsx)(i.bL,{"data-slot":"dialog",...e})}function p({...e}){return(0,s.jsx)(i.ZL,{"data-slot":"dialog-portal",...e})}function x({className:e,...t}){return(0,s.jsx)(i.hJ,{"data-slot":"dialog-overlay",className:u("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function m({className:e,children:t,...r}){return(0,s.jsxs)(p,{"data-slot":"dialog-portal",children:[(0,s.jsx)(x,{}),(0,s.jsxs)(i.UC,{"data-slot":"dialog-content",className:u("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...r,children:[t,(0,s.jsxs)(i.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,s.jsx)(l.A,{}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function f({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"dialog-header",className:u("flex flex-col gap-2 text-center sm:text-left",e),...t})}function g({className:e,...t}){return(0,s.jsx)(i.hE,{"data-slot":"dialog-title",className:u("text-lg leading-none font-semibold",e),...t})}var b=r(16189),v=r(71070),y=r(33872),j=r(39916),w=r(86356),P=r(30474);let k=()=>{let[e,t]=(0,a.useState)(!1),[r,n]=(0,a.useState)(null),i=(0,b.useRouter)();(0,a.useEffect)(()=>{let e=(0,v.A)();e&&n({name:e.name||"Guest",email:e.email||"No email available"})},[]);let l=async()=>{try{if(!(await fetch("https://medgurubackend.onrender.com/api/user/logout",{method:"GET",credentials:"include"})).ok)throw Error("Logout request failed");localStorage.removeItem("token"),document.cookie="token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",i.push("/")}catch(e){console.error("Logout failed",e)}};return(0,s.jsxs)("nav",{className:"fixed top-0 left-0 right-0 z-10 flex justify-between items-center p-4 text-white bg-gray-900 bg-opacity-40 lg:bg-transparent",children:[(0,s.jsx)("div",{className:"text-2xl font-semibold",children:(0,s.jsx)(o(),{href:"/",children:"HARMONY"})}),(0,s.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,s.jsx)(o(),{href:"/chat",children:(0,s.jsx)("span",{title:"New Chat",children:(0,s.jsx)(y.A,{size:28,strokeWidth:1.5,className:"text-white hover:text-green-400 transition"})})}),(0,s.jsx)(o(),{href:"/chat-history",children:(0,s.jsx)("span",{title:"History",children:(0,s.jsx)(j.A,{size:28,strokeWidth:1.5,className:"text-white hover:text-green-400 transition"})})}),(0,s.jsx)("button",{onClick:()=>{t(!e)},className:"focus:outline-none",children:(0,s.jsx)("span",{title:"Profile",children:(0,s.jsx)(w.A,{size:34,strokeWidth:1.5,className:"text-white hover:text-green-400 transition"})})})]}),(0,s.jsx)(h,{open:e,onOpenChange:t,children:(0,s.jsxs)(m,{className:"bg-gray-800 text-white max-w-sm mx-auto rounded-lg shadow-lg",children:[(0,s.jsx)(f,{children:(0,s.jsx)(g,{className:"text-center text-3xl",children:"Profile"})}),(0,s.jsxs)("div",{className:"flex flex-col items-center p-4",children:[(0,s.jsx)(P.default,{src:"/avatar.jpg",alt:"User Avatar",width:120,height:120,className:"rounded-full border border-gray-500"}),(0,s.jsx)("p",{className:"mt-2 font-semibold",children:r?.name||"Loading..."}),(0,s.jsx)("p",{className:"text-sm text-gray-400",children:r?.email||"Loading..."}),(0,s.jsx)("button",{onClick:l,className:"mt-4 w-full bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Logout"})]})]})})]})}},9779:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\bhaum\\\\Desktop\\\\projects\\\\harmony-ai\\\\src\\\\app\\\\chat\\\\[sessionid]\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\bhaum\\Desktop\\projects\\harmony-ai\\src\\app\\chat\\[sessionid]\\page.tsx","default")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14892:()=>{},15551:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(60687);r(43210);var a=r(4127);let n=({text:e,user:t})=>{let r="Generating response..."===e;return(0,s.jsx)("div",{className:`p-3 rounded-xl my-2 break-words w-fit max-w-[80%] h-auto 
        ${"me"===t?"bg-[#14190E] text-white self-end":"bg-gray-300 text-black self-start"} 
        ${r?"animate-pulse text-gray-500":""}`,style:{whiteSpace:"pre-wrap",overflowWrap:"break-word"},children:(0,s.jsx)(a.oz,{children:e})})}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},20972:()=>{},27698:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>d});var s=r(65239),a=r(48088),n=r(88170),o=r.n(n),i=r(30893),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let d={children:["",{children:["chat",{children:["[sessionid]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,9779)),"C:\\Users\\bhaum\\Desktop\\projects\\harmony-ai\\src\\app\\chat\\[sessionid]\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"C:\\Users\\bhaum\\Desktop\\projects\\harmony-ai\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Users\\bhaum\\Desktop\\projects\\harmony-ai\\src\\app\\chat\\[sessionid]\\page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/chat/[sessionid]/page",pathname:"/chat/[sessionid]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},49184:(e,t,r)=>{Promise.resolve().then(r.bind(r,9779))},55511:e=>{"use strict";e.exports=require("crypto")},61135:()=>{},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63589:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var s=r(60687),a=r(43210),n=r(16189),o=r(15551),i=r(3971),l=r(71070);let d=()=>{let e=(0,n.usePathname)().split("/chat/")[1]||null,[t,r]=(0,a.useState)(null),d=(0,a.useRef)(null),[c,u]=(0,a.useState)([]),[h,p]=(0,a.useState)(""),[x,m]=(0,a.useState)(!1),[f,g]=(0,a.useState)(!1),[b,v]=(0,a.useState)(null),y=(0,a.useRef)(null);(0,a.useEffect)(()=>{(async()=>{try{let e=await (0,l.A)();r(e?.id||null)}catch(e){console.error("Error fetching user ID:",e)}})()},[]),(0,a.useEffect)(()=>{d.current?.focus()},[]),(0,a.useEffect)(()=>{e&&t&&(async()=>{try{let r=await fetch(`https://medgurubackend.onrender.com/api/chat/history/${t}/${e}`),s=await r.json();s.success&&s.history.length>0&&s.history[0].messages.length>0&&u(s.history[0].messages)}catch(e){console.error("Error fetching chat history:",e)}})()},[e,t]),(0,a.useEffect)(()=>{y.current?.scrollIntoView({behavior:"smooth"})},[c]);let j=async()=>{if(x){w();return}if(h.trim()&&t){m(!0),g(!1);let r=new AbortController;v(r),u(e=>[...e,{text:h,user:"me"},{text:"Generating response...",user:"ai"}]);try{let s=await fetch(`https://medgurubackend.onrender.com/api/chat/${t}/${e||"new"}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userMessage:h}),signal:r.signal}),a=await s.json();u(e=>[...e.slice(0,-1),{text:a.aiMessage,user:"ai"}])}catch(e){e instanceof Error&&"AbortError"===e.name?(console.warn("AI response aborted."),u(e=>[...e.slice(0,-1),{text:"AI response paused.",user:"ai"}])):(console.error("API error:",e),u(e=>[...e.slice(0,-1),{text:"Error connecting to server.",user:"ai"}]))}finally{m(!1),p("")}}},w=()=>{b&&(b.abort(),g(!0),m(!1))};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.A,{}),(0,s.jsxs)("div",{className:"flex flex-col h-screen w-screen p-5 bg-gray-900 text-red-200 py-[60px]",children:[(0,s.jsxs)("div",{className:"flex-1 flex flex-col gap-2 overflow-auto hide-scrollbar mb-4 w-full sm:w-[60%] mx-auto",children:[0===c.length?(0,s.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500 text-3xl font-bold",children:"What can I help with?"}):c.map((e,t)=>(0,s.jsx)(o.A,{text:e.text,user:e.user},t)),(0,s.jsx)("div",{ref:y})]}),f&&(0,s.jsx)("div",{className:"text-center text-yellow-400 text-sm mb-2",children:"AI response paused."}),(0,s.jsx)("div",{className:"fixed bottom-0 left-0 right-0 z-10 flex flex-col items-center gap-2 border-t pt-3",children:(0,s.jsxs)("div",{className:"flex flex-row gap-2 mb-4 w-full sm:w-[60%] mx-auto",children:[(0,s.jsx)("input",{ref:d,className:"flex-1 p-3 border border-gray-300 rounded-xl text-sm max-w-[80%]",type:"text",value:h,onChange:e=>p(e.target.value),onKeyDown:e=>"Enter"===e.key&&!x&&j(),placeholder:"Type a message",disabled:x}),(0,s.jsx)("button",{className:`p-3 rounded-xl text-sm w-24 ${x?"bg-red-600":"bg-[#14190E] text-white"}`,onClick:j,children:x?"Pause":"Send"})]})})]})]})}},70440:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(31658);let a=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},71070:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(15659),a=r(79119),n=r.n(a);function o(){try{let e=s.A.get("token");if(!e)return console.error("No token found in cookies"),null;let t=n().decode(e);if(!t||"string"==typeof t)return console.error("Invalid token payload"),null;return t}catch(e){return console.error("Error decoding JWT:",e),null}}},73029:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,86346,23)),Promise.resolve().then(r.t.bind(r,27924,23)),Promise.resolve().then(r.t.bind(r,35656,23)),Promise.resolve().then(r.t.bind(r,40099,23)),Promise.resolve().then(r.t.bind(r,38243,23)),Promise.resolve().then(r.t.bind(r,28827,23)),Promise.resolve().then(r.t.bind(r,62763,23)),Promise.resolve().then(r.t.bind(r,97173,23))},73136:e=>{"use strict";e.exports=require("node:url")},76760:e=>{"use strict";e.exports=require("node:path")},78560:(e,t,r)=>{Promise.resolve().then(r.bind(r,63589))},79109:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,16444,23)),Promise.resolve().then(r.t.bind(r,16042,23)),Promise.resolve().then(r.t.bind(r,88170,23)),Promise.resolve().then(r.t.bind(r,49477,23)),Promise.resolve().then(r.t.bind(r,29345,23)),Promise.resolve().then(r.t.bind(r,12089,23)),Promise.resolve().then(r.t.bind(r,46577,23)),Promise.resolve().then(r.t.bind(r,31307,23))},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},94431:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d,metadata:()=>l});var s=r(37413),a=r(22376),n=r.n(a),o=r(68726),i=r.n(o);r(61135);let l={title:"harmony AI",description:"AI stress relief GURU created using gemini API"};function d({children:e}){return(0,s.jsx)("html",{lang:"en",children:(0,s.jsx)("body",{className:`${n().variable} ${i().variable} antialiased`,children:e})})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,145,658,814,39,127],()=>r(27698));module.exports=s})();